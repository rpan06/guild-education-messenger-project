<div *ngIf="isLoading" class="spinner">
  <div class="spinner-border" role="status"></div>
</div>

<div class="container d-flex flex-column justify-content-end">
  <form [formGroup]="inputForm" class="pt-3">
    <div class="pb-4">
      <label class="form-label mb-0 small" for="username">Username</label>
      <input id="username" class="form-control" type="text" formControlName="username" placeholder="Username">
      <div *ngIf="usernameForm.invalid && usernameForm.touched" class="text-danger small">
        <p *ngIf="usernameForm.hasError('required')" class="m-0">This field is required.</p>
        <p *ngIf="usernameForm.hasError('maxlength')" class="m-0">Must be less than 10 characters.</p>
      </div>
    </div>
    <div class="pb-4">
      <label class="form-label mb-0 small" for="message">Message</label>
      <input id="message" class="form-control" type="text" formControlName="message" placeholder="Message">
      <div *ngIf="messageForm.invalid && messageForm.touched" class="text-danger small">
        <p *ngIf="messageForm.hasError('required')" class="m-0">This field is required.</p>
        <p *ngIf="messageForm.hasError('maxlength')" class="m-0">>Must be less than 200 characters.</p>
      </div>
    </div>
    <button (click)="onSend()" type="button" class="btn btn-primary"
      [disabled]="usernameForm.invalid || messageForm.invalid">Send</button>
  </form>

  <hr class="mb-2">

  <div class="d-flex flex-column pt-3" *ngFor="let message of chatMessages">
    <div class="fw-bold fs-5">{{ message.username}}</div>
    <div class="bg-info text-black rounded-3 p-3 text-wrap text-break">{{ message.message}}</div>
    <div class="d-flex justify-content-end small text-secondary">{{message.createdAt | date: 'short'}}</div>
  </div>


</div>
